# TPack Diagnostic

Tool for diagnosing Terraria Resource Packs.

Note that this is largely intended for overhaul packs.
Smaller Resource Packs don't really need external tools to keep things
manageable.

## Current Reference File Versions

Look for a `!version=` in these files.
If the versions do not match the numbers in the table below, the files are out
of date and you will need to run them again.

| File           | Version | Changed In |
|:--------------:|:-------:|:----------:|
| `images.slop`  | `1`     | `2.0.0`    |
| `loc_keys.txt` | *N/A*   | *N/A*      |

## Usage

Syntax:

```bash
t_pack_diagnostic <ACTION> [args]
```

(remember that, on Powershell, you must use `.\t_pack_diagnostic.exe`)

- `<ACTION>`: One of a set of strings. (see below)
  Each action has its own set of arguments.
- `[args]`: An actions arguments. Possible arguments are:
  - `--input` (`-i`)
  - `--output` (`-o`)
  - `--reference` (`-r`)

Run with `--help` instead for a quick help string:

```bash
t_pack_diagnostic --help
```

## Actions

### Generate - `gen`

```bash
t_pack_diagnostic gen -i ... -o ...
```

Generates a set of helper files from extracted game assets.

If there is a CSV file in `-i` called `Loc.csv`,
an extra reference pointing to it will be created.

| Arg  | Desc                               |
|------|------------------------------------|
| `-i` | Root dir of extracted files.       |
| `-o` | Dir for helpers to be dumped into. |

### Scan - `scan`

```bash
t_pack_diagnostic scan -i ... -r ...
```

Scans your Resource Pack and gives a diagnostic of it.

Currently only scans images and localization.

#### Notes about scanning localization files

As of writing, the scanner can only read CSV files,
can't tell different languages apart, and can't notice duplicate entries.

Also, entries where the first character of the first field is `#` are ignored.

| Arg  | Desc                                   |
|------|----------------------------------------|
| `-i` | Root dir of your Resource Pack.        |
| `-r` | Dir of the helpers generated by `gen`. |

### Build - `build`

```bash
t_pack_diagnostic build -i ... -o ... -r ...
```

Creates a copy of your Resource Pack with only valid files,
preparing it for uploading.

Currently does not properly validate files other than images.

| Arg  | Desc                                   |
|------|----------------------------------------|
| `-i` | Root dir of your Resource Pack.        |
| `-o` | Root dir of the copy.                  |
| `-r` | Dir of the helpers generated by `gen`. |
